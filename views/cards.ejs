<%
locals.title = "Cards - Giffon";
bodyClasses.push("page-cards");
%>
<%- include('head'); -%>

<div class="container">
    <h1>Your payment method</h1>
    <% if (stripe_customer != null && stripe_customer.default_source != null && stripe_customer.default_source.object == "card") {
        var card = stripe_customer.default_source;
    %>
        <div>
            <p><span><%=card.brand%></span> **** **** **** <span><%=card.last4%></span></p>
        </div>
    <% } else { %>
    <form action="/cards" method="POST" id="payment-form" enctype="application/x-www-form-urlencoded">
        <div class="form-row">
            <label for="card-element">
                Credit or debit card
            </label>
            <div id="card-element">
                <!-- A Stripe Element will be inserted here. -->
            </div>
    
            <!-- Used to display Element errors. -->
            <div id="card-errors" role="alert"></div>
        </div>
        <button>Add credit card</button>
    </form>
    <% } %>
</div>

<%- include('foot'); -%>