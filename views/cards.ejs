<%
locals.title = "Cards - Giffon";
bodyClasses.push("page-cards");

var hasCard = stripe_customer != null && stripe_customer.default_source != null && stripe_customer.default_source.object == "card";
var hasCardClass = hasCard ? "has-card-some" : "has-card-none";
%>
<%- include('head'); -%>

<div class="container <%=hasCardClass%>">
    <h1>Your payment method</h1>
    <% 
        if (hasCard) {
            var card = stripe_customer.default_source;
    %>
        <div>
            <p><span><%=card.brand%></span> **** **** **** <span><%=card.last4%></span></p>
            <a id="replace-card" href="#replace-card">replace card</a>
        </div>
    <%
        }
    %>
    <form action="/cards" method="POST" id="payment-form" enctype="application/x-www-form-urlencoded">
        <div class="form-row">
            <label>
                Credit or debit card
            </label>
            <div id="card-element">
                <!-- A Stripe Element will be inserted here. -->
            </div>
    
            <!-- Used to display Element errors. -->
            <div id="card-errors" role="alert"></div>
        </div>
        <input type="submit">
    </form>
</div>

<%- include('foot'); -%>